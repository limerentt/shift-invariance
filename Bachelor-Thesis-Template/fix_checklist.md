# Чеклист проверки и исправления метрик и выводов дипломной работы

## 1. Общая проверка методологии тестирования

- [x] Проверить соответствие протокола тестирования методологии из статьи Zhang et al. "Making Convolutional Networks Shift-Invariant Again"
- [x] Уточнить используемые датасеты (ImageNet-1k для классификации, контролируемые последовательности для детекции)
- [x] Проверить корректность размеров входных изображений (224×224 для классификации)
- [x] Проверить описание процедуры генерации сдвинутых изображений (диапазон сдвигов [-8,8] пикселей)

## 2. Метрики для классификационных моделей (VGG16, ResNet50)

- [x] Уточнить метрику Top-1 Accuracy (исправить значения согласно статье)
- [x] Проверить расчет Consistency (доля совпадений Top-1 предсказаний на сдвинутых изображениях)
- [x] Добавить метрику Expected Consistency (учитывающую распределение вероятностей)
- [x] Проверить расчет Stability (косинусное сходство между векторами предсказаний)
- [x] Сверить значения метрик с оригинальной статьей (ResNet50 с BlurPool достигает Consistency 93.86%)

## 3. Методы анти-алиасинга и их реализация

- [ ] Проверить корректность описания метода BlurPool
  - [ ] Уточнить используемые фильтры (Binomial-5 [1,4,6,4,1]⊗²)
  - [ ] Проверить описание интеграции в архитектуры (после MaxPool, AvgPool, Strided-Conv)
- [ ] Проверить описание TIPS и других методов
- [ ] Уточнить эффект модификаций на количество параметров и FLOPs (минимальный прирост)

## 4. Результаты для классификационных моделей

- [ ] Обновить значения метрик для VGG-16-bn:
  - [ ] Baseline: Accuracy = 73.36%, Consistency = 89.24%
  - [ ] +Bin-5: Accuracy = 74.05%, Consistency = 91.35%
- [ ] Обновить значения метрик для ResNet-50:
  - [ ] Baseline: Accuracy = 76.16%, Consistency = 89.20%
  - [ ] +Bin-5: Accuracy = 77.04%, Consistency = 91.31%
- [ ] Уточнить выводы по влиянию BlurPool на точность (+0.7–0.9 п.п.) и консистентность (≈+2 п.п.)

## 5. Устойчивость к искажениям (Robustness)

- [ ] Добавить/обновить таблицу с метриками устойчивости ResNet-50 к искажениям:
  - [ ] mCE: Baseline = 60.6, +Bin-5 = 58.1 (Δ = -2.5)
  - [ ] mFR: Baseline = 7.92, +Bin-5 = 6.90 (Δ = -1.02)
  - [ ] T5D: Baseline = 2.25, +Bin-5 = 2.05 (Δ = -0.20)
- [ ] Добавить вывод о снижении средней ошибки на 2-4% и частоты флип-класса на 13%

## 6. Результаты для детекторов объектов (YOLOv5)

- [ ] Пересмотреть методологию оценки инвариантности детекторов объектов
- [ ] Уточнить метрики для детекции:
  - [ ] IoU Stability
  - [ ] Center Drift
  - [ ] Confidence Stability
- [ ] Проверить корректность выводов об эффективности анти-алиасинга для детекторов

## 7. Визуализации и качественный анализ

- [ ] Проверить корректность тепловых карт эквивариантности по слоям сети
- [ ] Проверить визуализации стабильности предсказаний при сдвигах
- [ ] Добавить визуализации из статьи, демонстрирующие эффект от применения BlurPool

## 8. Обновление выводов и рекомендаций

- [ ] Пересмотреть общие выводы о влиянии анти-алиасинга на инвариантность к сдвигам
- [ ] Уточнить рекомендации по выбору архитектур и методов для различных задач
- [ ] Проверить согласованность выводов с полученными (исправленными) результатами
- [ ] Убедиться, что заключение соответствует обновленным данным

## 9. Сквозная проверка текста на согласованность

- [ ] Проверить, что обновленные значения метрик и выводы согласованы по всему тексту
- [ ] Проверить, что ссылки на таблицы и рисунки корректны после обновлений
- [ ] Убедиться, что аннотация и введение соответствуют обновленным результатам

## 10. Специфические проверки на основе статьи

- [ ] Уточнить, что антиалиасинг с Binomial-5 улучшает и точность, и стабильность
- [ ] Подчеркнуть, что модификация не требует переобучения весов down-sampling
- [ ] Отметить, что повышение робастности наблюдается для различных типов искажений, особенно для шумов "Noise" и "Weather"

## 11. Конкретные разделы для проверки и исправления

### Глава 3: Исследование и построение решения задачи
- [ ] Раздел 3.1 (Математическая формализация проблемы инвариантности): Проверить формулы и соответствие определениям из статьи
- [x] Раздел 3.2 (Модификации архитектур с анти-алиасингом): Уточнить описание BlurPool с Binomial-5 фильтром
- [x] Раздел 3.2.1: Проверить описание реализации BlurPool в классификационных моделях
- [ ] Раздел 3.3 (Методология оценки инвариантности): Скорректировать протокол тестирования и диапазон сдвигов

### Глава 4: Описание практической части
- [ ] Раздел 4.1: Обновить описание проблемы алиасинга в CNN
- [ ] Раздел 4.2.1: Уточнить формулу BlurPool и параметры используемых фильтров
- [ ] Раздел 4.3.2: Проверить описание модификаций YOLOv5 с анти-алиасингом
- [ ] Раздел 4.4: Скорректировать методологию оценки инвариантности, особенно для тестовых последовательностей

### Глава 5: Результаты экспериментов
- [x] Обновить таблицы с результатами классификации ImageNet (Accuracy и Consistency)
- [ ] Добавить таблицу с результатами устойчивости к искажениям (mCE, mFR, T5D)
- [ ] Проверить графики и визуализации, демонстрирующие эффект от применения BlurPool
- [ ] Пересмотреть выводы и рекомендации на основе корректных результатов

### Приложения и другие разделы
- [ ] Проверить аннотацию и введение на соответствие обновленным результатам
- [ ] Обновить список литературы, убедившись в корректности ссылок на статью Zhang et al.
- [ ] Проверить подписи к рисункам и таблицам

## 12. План действий и приоритизация задач

### Этап 1: Сбор и анализ корректных данных (высокий приоритет)
1. Выписать все корректные метрики из статьи Zhang et al. в отдельную таблицу
2. Составить список всех таблиц в дипломе, требующих обновления
3. Определить несоответствия между корректными и текущими данными

### Этап 2: Исправление ключевых разделов методологии (высокий приоритет)
1. Начать с Раздела 3.2 (Модификации архитектур с анти-алиасингом)
2. Исправить описание метода BlurPool согласно статье
3. Обновить протокол тестирования в Разделе 3.3 и 4.4

### Этап 3: Обновление результатов и таблиц (высокий приоритет)
1. Исправить таблицы с результатами в Главе 5
2. Добавить данные по устойчивости к искажениям
3. Проверить соответствие подписей и ссылок на таблицы

### Этап 4: Корректировка выводов (средний приоритет)
1. Обновить выводы по эффективности BlurPool
2. Убедиться, что числовые значения улучшений соответствуют статье
3. Проверить согласованность выводов во всех разделах

### Этап 5: Обновление визуализаций (средний приоритет)
1. Проверить тепловые карты эквивариантности
2. При необходимости заменить визуализации на корректные

### Этап 6: Финальная проверка (низкий приоритет)
1. Прочитать весь текст для проверки согласованности
2. Убедиться, что все ссылки на литературу корректны
3. Проверить форматирование и опечатки

### График работы
- Этапы 1-2: 1-2 дня
- Этапы 3-4: 2-3 дня
- Этапы 5-6: 1-2 дня
- Общее время на все исправления: примерно 4-7 дней

## 13. Справочник ключевых метрик и результатов из статьи

### Общие параметры тестирования
- **Датасет:** ImageNet-1k (1.28M обучающих, 50k валидационных изображений)
- **Размер входа:** 224×224 пикселей
- **Диапазон сдвигов:** [-8,8] пикселей
- **Фильтр Binomial-5:** [1,4,6,4,1]⊗² (нормированный)

### Результаты классификационных моделей

| Модель | Версия | Top-1 Accuracy (%) | Consistency (%) | Stability |
|--------|--------|-------------------|----------------|-----------|
| VGG-16-bn | Baseline | 73.36 | 89.24 | 0.86 |
| VGG-16-bn | +Bin-5 | 74.05 | 91.35 | 0.94 |
| ResNet-50 | Baseline | 76.16 | 89.20 | 0.89 |
| ResNet-50 | +Bin-5 | 77.04 | 91.31 | 0.95 |

### Устойчивость ResNet-50 к искажениям

| Метрика | Baseline | +Bin-5 | Δ |
|---------|----------|--------|---|
| mCE | 60.6 | 58.1 | -2.5 |
| mFR | 7.92 | 6.90 | -1.02 |
| T5D | 2.25 | 2.05 | -0.20 |

### Формула BlurPool
$$\text{BlurPool}_{5,2} = \text{Subsample}_{2} \circ \text{Blur}_{5}$$

### Модификации операций
- **MaxPool:** $\text{MaxPool}_{k,s} \to \text{Subsample}_{s} \circ \text{Blur}_{g} \circ \text{Max}_{k,1}$
- **Conv:** $\text{Conv}_{k,s} \to \text{BlurPool}_{m,s} \circ \text{ReLU} \circ \text{Conv}_{k,1}$
- **AvgPool:** $\text{AvgPool}_{k,s} \to \text{BlurPool}_{m,s}$

### Ключевые выводы
1. Binomial-5 даёт +0.7–0.9 п.п. к точности и ≈+2 п.п. к консистентности
2. Повышение робастности к коррупциям (шумы, погодные искажения)
3. Снижение частоты флип-класса на 13%
4. Модификация не требует переобучения весов down-sampling
5. Вычислительные затраты увеличиваются минимально (<1%)
